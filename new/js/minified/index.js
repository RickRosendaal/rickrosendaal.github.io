var disabled=false;var currentIndex=0;var supportsWheel=false;var enableFunction;var sections=[].slice.call(document.getElementsByClassName("old-section")).concat([].slice.call(document.getElementsByClassName("section")));function is_touch_device(){return"ontouchstart" in window||navigator.maxTouchPoints}for(var i=0;i<sections.length;i++){var uriEncodedSectionId=sections[i].id;var uriEncodedWindowLocationHash=decodeURI(window.location.hash.substring(1));if(uriEncodedSectionId==uriEncodedWindowLocationHash){currentIndex=i;break}}document.addEventListener("imagesLoaded",function(){setTimeout(function(){console.log("Heading towards: "+sections[currentIndex].id);window.scrollTo(0,sections[currentIndex].offsetTop)},0);setTimeout(function(){if(!is_touch_device()){document.addEventListener("wheel",OnWheelScroll);document.addEventListener("mousewheel",OnWheelScroll);document.addEventListener("DOMMouseScroll",OnWheelScroll)}else{$(document.body).on("touchstart",function(c){var b=true;var a=c.originalEvent.touches,d=a[0].screenY;console.log("TOUCH");$(this).on("touchmove",function(h){if(!b){return}var f=h.originalEvent.touches,g=f[0].screenY,j=g-d;if(j<-50){console.log("up");scroll(1);b=false}if(j>50){console.log("down");scroll(-1);b=false}}).on("touchend",function(){$(this).off("touchmove touchend")})})}},300)});var userAgent=navigator.userAgent.toLowerCase();var isAndroidChrome=/chrome/.test(userAgent)&&/android/.test(userAgent);var isIOSChrome=/crios/.test(userAgent);if(!isAndroidChrome&&!isIOSChrome){window.onresize=function(a){window.scrollTo(0,sections[currentIndex].offsetTop);disabled=false}}function OnWheelScroll(a){if(disabled==false){if(a.type=="wheel"){supportsWheel=true}else{if(supportsWheel){return}}var b=((a.deltaY||-a.wheelDelta||a.detail)>>10)||1;console.log(b);scroll(b)}}function scroll(c){if(disabled){return}if(c<0&&currentIndex==0){return}if(c>0&&currentIndex==sections.length-1){return}currentIndex+=c;disabled=true;if(enableFunction!=null){clearTimeout(enableFunction)}var a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var b=a*currentIndex;doScrolling(sections[currentIndex],700);enableFunction=setTimeout(function(){disabled=false},700)}function doScrolling(f,d){var b=f.offsetTop;if(f.id=="Home"){history.replaceState({},document.title,document.baseURI.split("#")[0])}else{console.log("replacing history: "+f.id);history.replaceState(null,null,"#"+f.id)}var j=$("html, body");j.stop();j.animate({scrollTop:b},d);return;var e=window.pageYOffset;var k=b-e;if(k==0){return}var a;var g=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var l=Math.abs(k)/g;d*=Math.min(1,l);window.requestAnimationFrame(function c(m){if(!a){a=m}var n=m-a;var h=Math.min(n/d,1);window.scrollTo(0,e+k*h);if(n<d&&!scrollingInfo.StopScrolling){window.requestAnimationFrame(c)}})}if($("body").hasClass("mobile")){var viewportHeight=$(".section").innerHeight();$(".section").css({height:viewportHeight})};